<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‚ú® Divine Janmashtami Celebration ‚ú®</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Hind:wght@300;400&family=Tiro+Devanagari+Hindi&display=swap" rel="stylesheet">
<style>
    /* Reset and Basic Setup */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Hind', sans-serif;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        background: #000; /* Fallback background */
        cursor: none; /* Hide default cursor for custom trail */
        padding: 15px; /* Add some padding for small screens */
    }

    /* === PRE-LOADER === */
    #preloader {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        background: #0c001a;
        z-index: 10000;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        color: #FFD700;
        font-family: 'Tiro Devanagari Hindi', serif;
        font-size: 2rem;
        transition: opacity 1s ease-in-out;
    }
    .loader-text {
        animation: pulseText 2s infinite ease-in-out;
    }
    @keyframes pulseText {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }

    /* === DIVINE BACKGROUND === */
    .bg-divine {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: radial-gradient(ellipse at 70% 30%, #4a00e0 0%, #0c001a 40%, #000000 100%);
        z-index: -1;
    }
    #stars, #stars2, #stars3 {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background-repeat: repeat;
        background-position: 0 0;
        animation: move-twink-back 200s linear infinite;
    }
    #stars { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); }
    #stars2 { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); animation-duration: 150s; opacity: 0.6; }
    #stars3 { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); animation-duration: 100s; opacity: 0.3; }

    @keyframes move-twink-back {
        from { background-position: 0 0; } to { background-position: -10000px 5000px; }
    }

    /* === MAIN CONTENT CONTAINER === */
    .container {
        text-align: center;
        z-index: 2;
        padding: 30px 40px;
        background: rgba(12, 0, 26, 0.5);
        border-radius: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 215, 0, 0.3);
        box-shadow: 0 8px 32px 0 rgba(255, 215, 0, 0.1);
        transform-style: preserve-3d;
        transition: transform 0.1s linear;
        opacity: 0;
        transform: scale(0.8);
        animation: fadeInContainer 1s 0.5s forwards cubic-bezier(0.25, 1, 0.5, 1);
        max-width: 95vw;
    }
    @keyframes fadeInContainer {
        to { opacity: 1; transform: scale(1); }
    }

    /* === HEADING AND WISHES === */
    .main-heading {
        font-family: 'Great Vibes', cursive;
        font-size: clamp(3rem, 10vw, 5.5rem);
        color: #FFD700;
        text-shadow: 0 0 10px #FFD700, 0 0 25px #FFD700, 0 0 45px #ff8c00;
        animation: flicker 4s infinite alternate;
    }
    @keyframes flicker {
        0%, 18%, 22%, 25%, 53%, 57%, 100% {
            text-shadow: 0 0 10px #FFD700, 0 0 25px #FFD700, 0 0 45px #ff8c00, 0 0 70px #ff8c00, 0 0 100px #ff8c00;
        }
        20%, 24%, 55% { text-shadow: none; }
    }

    .wish {
        font-size: clamp(1.2rem, 3vw, 1.5rem);
        color: #e6d4a7; /* Soft gold */
        margin: 15px 0;
        text-shadow: 0 0 8px rgba(0, 0, 0, 0.8);
    }

    .kanha-image {
        width: 200px; height: 200px;
        margin: 20px auto;
        border-radius: 50%;
        border: 6px solid #FFD700;
        box-shadow: 0 0 35px #FFD700, inset 0 0 15px rgba(0,0,0,0.5);
        animation: gentleFloat 5s infinite alternate ease-in-out;
    }
    .kanha-image img {
        width: 100%; height: 100%; object-fit: cover; border-radius: 50%;
    }
    @keyframes gentleFloat {
        from { transform: translateY(-5px); } to { transform: translateY(5px); }
    }
    
    /* === BUTTON === */
    .continue-button {
        font-family: 'Hind', sans-serif;
        background: linear-gradient(145deg, #FFD700, #ffac33);
        color: #4a2c00;
        font-size: 1.4rem; padding: 14px 40px; border: none; border-radius: 50px;
        font-weight: bold; text-transform: uppercase; letter-spacing: 1px;
        box-shadow: 0 0 20px gold, inset 0 0 5px rgba(255,255,255,0.7);
        cursor: none;
        transition: all 0.3s ease;
        margin-top: 25px;
        position: relative;
    }
    .continue-button:hover {
        transform: scale(1.1) translateY(-5px);
        box-shadow: 0 0 35px gold, 0 0 60px #FFD700;
        background: linear-gradient(145deg, #fff08b, #ffc56e);
    }

    /* === FULLSCREEN VIDEO OVERLAY === */
    #video-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: #000;
        z-index: 9998;
        display: none; /* Controlled by JS */
        justify-content: center;
        align-items: center;
    }
    #video-overlay video {
        width: 100%;
        height: 100%;
        object-fit: contain; /* Use contain to fit 16:9 in landscape */
    }

    #close-video {
        position: fixed; top: 20px; right: 30px;
        font-size: 3rem; color: white;
        cursor: none; z-index: 9999;
        background: transparent; border: none;
        opacity: 0.5; transition: opacity 0.3s;
        padding: 5px 10px; /* Bigger tap area */
    }
    #close-video:hover { opacity: 1; }
    
    /* === FLOATING PARTICLES (FEATHERS, FLUTES, FLOWERS) === */
    .particle {
        position: absolute; font-size: 2rem;
        pointer-events: none; z-index: 5; opacity: 0;
    }
    .feather, .flute { animation: rise 15s linear infinite; }
    @keyframes rise {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
    }
    .feather { filter: drop-shadow(0 0 5px #00e6e6); }
    .flute { filter: drop-shadow(0 0 5px #ffd700); }
    .flower { animation: fall 12s linear infinite; }
    @keyframes fall {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
    }
    .flower { filter: drop-shadow(0 0 5px #ff69b4); }

    /* === SPARKLE CURSOR TRAIL === */
    #cursor-trail {
        position: fixed; top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none; z-index: 9999;
    }

    /* === AUDIO CONTROL === */
    #mute-toggle {
        position: fixed; bottom: 20px; left: 20px;
        background: rgba(255, 215, 0, 0.7);
        border: none; border-radius: 50%;
        width: 50px; height: 50px;
        font-size: 1.5rem;
        cursor: none; z-index: 100;
        transition: all 0.3s;
    }
    #mute-toggle:hover {
        background: gold; transform: scale(1.1);
    }
    
    /* ======================================= */
    /* === RESPONSIVE DESIGN FOR SMALL SCREENS === */
    /* ======================================= */
    @media (max-width: 600px) {
        .container {
            padding: 25px 20px;
        }

        .main-heading {
            font-size: clamp(2.5rem, 12vw, 4rem);
        }

        .wish {
            font-size: clamp(1rem, 4vw, 1.2rem);
        }

        .kanha-image {
            width: 150px;
            height: 150px;
            border-width: 4px;
        }

        .continue-button {
            font-size: 1.2rem;
            padding: 12px 30px;
        }
    }
</style>
</head>
<body>

<div id="preloader">
    <div class="loader-text">‡§ú‡§Ø ‡§∂‡•ç‡§∞‡•Ä ‡§ï‡•É‡§∑‡•ç‡§£</div>
</div>

<div class="bg-divine">
    <div id="stars"></div><div id="stars2"></div><div id="stars3"></div>
</div>

<main class="container">
    <div class="kanha-image">
        <img src="https://i.pinimg.com/736x/c6/cc/bf/c6ccbf6b7b602015d18895de92664781.jpg" alt="Baal Gopal Krishna">
    </div>
    <h1 class="main-heading">Happy Janmashtami</h1>
    <p class="wish">May the Natkhat Nandlal always give you happiness, health, and prosperity.</p>
    <button class="continue-button" id="playVideoBtn">Enter the Celebration</button>
</main>

<div id="video-overlay">
    <button id="close-video">&times;</button>
    <video id="janmashtami-video" src="j.mp4" loop playsinline></video>
</div>

<audio id="background-music" src="a.mp3" loop></audio>
<button id="mute-toggle">üîá</button>

<canvas id="cursor-trail"></canvas>

<script>
window.addEventListener('load', () => {
    // Hide pre-loader
    const preloader = document.getElementById('preloader');
    preloader.style.opacity = '0';
    setTimeout(() => {
        preloader.style.display = 'none';
        document.getElementById('background-music').play().catch(e => console.log("Audio autoplay was blocked."));
    }, 1000);

    const container = document.querySelector('.container');
    const body = document.body;

    // --- 3D Tilt Effect on Container ---
    container.addEventListener('mousemove', (e) => {
        const { left, top, width, height } = container.getBoundingClientRect();
        const x = e.clientX - left; const y = e.clientY - top;
        const rotateX = -1 * ((y - height / 2) / (height / 2)) * 10;
        const rotateY = ((x - width / 2) / (width / 2)) * 10;
        container.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
    });
    container.addEventListener('mouseleave', () => {
        container.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale(1)';
    });

    // --- Floating Particles ---
    const particleEmojis = { rising: ['ü™∂', 'ü™à'], falling: ['üå∏', 'üå∫', 'üåº'] };
    function createParticle() {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        const type = Math.random() > 0.5 ? 'rising' : 'falling';
        if (type === 'rising') {
            const emoji = particleEmojis.rising[Math.floor(Math.random() * particleEmojis.rising.length)];
            particle.innerHTML = emoji;
            particle.classList.add(emoji === 'ü™∂' ? 'feather' : 'flute');
            particle.style.bottom = '-20px';
        } else {
            particle.innerHTML = particleEmojis.falling[Math.floor(Math.random() * particleEmojis.falling.length)];
            particle.classList.add('flower');
            particle.style.top = '-20px';
        }
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.fontSize = Math.random() * 1.5 + 1 + 'rem';
        const duration = Math.random() * 8 + 10;
        particle.style.animationDuration = duration + 's';
        particle.style.animationDelay = Math.random() * 5 + 's';
        body.appendChild(particle);
        setTimeout(() => particle.remove(), (duration + 5) * 1000);
    }
    setInterval(createParticle, 500);
    for(let i = 0; i < 20; i++) createParticle();

    // --- Sparkle Cursor Trail ---
    const canvas = document.getElementById('cursor-trail');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    let particles = [];
    const cursor = { x: canvas.width / 2, y: canvas.height / 2 };
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
    });
    document.addEventListener('mousemove', (e) => {
        cursor.x = e.clientX; cursor.y = e.clientY;
    });
    class Particle {
        constructor() {
            this.x = cursor.x; this.y = cursor.y;
            this.size = Math.random() * 3 + 1;
            this.speedX = Math.random() * 3 - 1.5; this.speedY = Math.random() * 3 - 1.5;
            this.color = `hsl(${Math.random() * 50 + 40}, 100%, 70%)`;
        }
        update() {
            this.x += this.speedX; this.y += this.speedY;
            if (this.size > 0.2) this.size -= 0.1;
        }
        draw() {
            ctx.fillStyle = this.color; ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
        }
    }
    function handleParticles() {
        particles.push(new Particle());
        for (let i = 0; i < particles.length; i++) {
            particles[i].update(); particles[i].draw();
            if (particles[i].size <= 0.3) { particles.splice(i, 1); i--; }
        }
    }
    function animateTrail() {
        ctx.clearRect(0, 0, canvas.width, canvas.height); handleParticles();
        requestAnimationFrame(animateTrail);
    }
    animateTrail();

    // === UPDATED Fullscreen Video & Audio Logic ===
    const playBtn = document.getElementById('playVideoBtn');
    const videoOverlay = document.getElementById('video-overlay');
    const videoPlayer = document.getElementById('janmashtami-video');
    const closeBtn = document.getElementById('close-video');
    const backgroundAudio = document.getElementById('background-music');

    playBtn.addEventListener('click', () => {
        backgroundAudio.pause();
        videoOverlay.style.display = 'flex';
        videoPlayer.play();

        const isMobile = window.innerWidth < 768;

        // On mobile, try to lock to landscape for a better video experience
        if (isMobile && screen.orientation && typeof screen.orientation.lock === 'function') {
            screen.orientation.lock('landscape').then(() => {
                videoOverlay.requestFullscreen().catch(err => console.error(err.message));
            }).catch(err => {
                console.warn("Could not lock screen orientation:", err.message);
                videoOverlay.requestFullscreen().catch(err => console.error(err.message));
            });
        } else {
            // On desktop or unsupported devices, just go fullscreen
            videoOverlay.requestFullscreen().catch(err => {
                console.error(`Error attempting to enable full-screen mode: ${err.message} (${err.name})`);
            });
        }
    });

    function closeFullscreenVideo() {
        videoOverlay.style.display = 'none';
        videoPlayer.pause();
        videoPlayer.currentTime = 0;
        backgroundAudio.play().catch(e => console.log("Audio play failed after closing video."));
        
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
        // Unlock screen orientation when video is closed
        if (screen.orientation && typeof screen.orientation.unlock === 'function') {
            screen.orientation.unlock();
        }
    }
    
    closeBtn.addEventListener('click', closeFullscreenVideo);

    document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement) {
            closeFullscreenVideo();
        }
    });

    // --- Audio Control Logic ---
    const muteButton = document.getElementById('mute-toggle');
    backgroundAudio.volume = 0.5;
    
    muteButton.addEventListener('click', () => {
        backgroundAudio.muted = !backgroundAudio.muted;
        muteButton.textContent = backgroundAudio.muted ? 'üîá' : 'üîä';
    });
});
</script>

</body>
</html>